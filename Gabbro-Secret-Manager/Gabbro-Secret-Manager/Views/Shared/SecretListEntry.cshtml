@using Gabbro_Secret_Manager.Views.Shared;
@model SecretListEntryModel

<td class="pl-25 pr-25">
    <div class="secret-list-value"
        >@Model.Secret.Name</div>
</td>
<td class="pl-25 pr-25">
    <div class="flex flex-row gap-10 align-end">
        <div class="secret-list-value"
            >@Model.Secret.Value</div>
        <div class="flex flex-col align-center">
            <button type="button"
                _="on click
                    writeText('@Model.Secret.Value') into the navigator's clipboard
                    add .show to the next .tooltip
                        then wait 0.8s
                        then remove .show from the next .tooltip
                "><i class="fa-regular fa-copy"></i></button>
            <span class="tooltip">copied!</span>
        </div>
    </div>
</td>
<td class="width-100">
    <div>
        @foreach(var tag in Model.Secret.Tags)
        {
            <span class="secret-list-tag">@tag</span>
        }
    </div>
</td>
<td>
    <div class="flex flex-row gap-5">
        <button
            type="button"
            hx-get="/partials/upsertSecretForm" 
            hx-vals='{
                "currentKey":"@Model.Secret.Name",
                "key":"@Model.Secret.Name",
                "value":"@Model.Secret.Value",
                "comments":"@Model.Secret.Comments",
                "tags":[@string.Join(',', Model.Secret.Tags.Select(t => $"\"{t}\""))]
            }' 
            hx-target="#content" 
            hx-swap="innerHTML"
            >Edit</button>
        <button 
            type="button" 
            class="negative" 
            hx-get="/partials/confirmDeleteSecretListEntry"
            hx-vals='{"@SecretListEntryModel.SecretNameKey":"@Model.Secret.Name"}'
            hx-target="closest tr"
        >Delete</button>
    </div>
</td>
